CREATE TABLE disc_data (
    name VARCHAR(50),
    code VARCHAR(10),
    date DATE,
    title TEXT,
    link TEXT,
    view INT,
    recommend INT,
    dislike INT,
    content VARCHAR(5) DEFAULT 'F'
);

CREATE TABLE disc_analysis (
    id         INT AUTO_INCREMENT PRIMARY KEY,
    date       DATE,
    name       VARCHAR(50),
    code       VARCHAR(10),
    link       TEXT NOT NULL,
    analysis   VARCHAR(5) DEFAULT 'F',
    row_cont   TEXT,
    prc_cont   TEXT,
    sent_type  VARCHAR(20),
    sent_scr   FLOAT
);

SELECT
    d.date,
    d.name,
    d.code,
    d.link
FROM disc_data d
LEFT JOIN disc_analysis a
ON d.link = a.link
WHERE a.link IS NULL;

CREATE TABLE stocks(
    name VARCHAR(50) PRIMARY KEY,
    code VARCHAR(10)
);

CREATE TABLE news_comments(
    id INT PRIMARY KEY AUTO_INCREMENT,
    date DATE,
    name VARCHAR(50),
    code VARCHAR(10),
    title TEXT,
    link TEXT,
    up INT,
    down INT,
    comment TEXT,
    analysis VARCHAR(10) DEFAULT 'F',
    sent_type VARCHAR(20),
    sent_score FLOAT DEFAULT 0,
    FOREIGN KEY(name) REFERENCES stocks(name)
);

CREATE TABLE discussion(
    id INT PRIMARY KEY AUTO_INCREMENT,
    date DATE,
    name VARCHAR(50),
    code VARCHAR(10),
    title TEXT,
    link TEXT,
    up INT,
    down INT,
    view INT,
    comment TEXT,
    analysis VARCHAR(10) DEFAULT 'F',
    sent_type VARCHAR(20),
    sent_score FLOAT DEFAULT 0,
    FOREIGN KEY(name) REFERENCES stocks(name)
);